flowchart TD
    %% Global Styles for Google Gemini Look
    classDef user fill:#ffffff,stroke:#dadce0,stroke-width:2px,color:#202124,rx:12,ry:12,font-family:'Google Sans', 'Roboto', sans-serif
    classDef frontend fill:#e8f0fe,stroke:#1a73e8,stroke-width:2px,color:#1967d2,rx:12,ry:12,font-family:'Google Sans', 'Roboto', sans-serif
    classDef storage fill:#fce8e6,stroke:#ea4335,stroke-width:2px,color:#c5221f,rx:12,ry:12,font-family:'Google Sans', 'Roboto', sans-serif
    classDef compute fill:#e6f4ea,stroke:#34a853,stroke-width:2px,color:#137333,rx:12,ry:12,font-family:'Google Sans', 'Roboto', sans-serif
    classDef database fill:#fef7e0,stroke:#fbbc04,stroke-width:2px,color:#b06000,rx:12,ry:12,font-family:'Google Sans', 'Roboto', sans-serif
    classDef geminiText font-family:'Google Sans', 'Roboto', sans-serif,font-size:14px

    %% Nodes
    User(fa:fa-user User / Admin):::user
    
    subgraph Client_Side [Frontend Application]
        direction TB
        ReactApp[React Web App<br/>(UI Selection)]:::frontend
        DirectUpload[Direct Upload Stream<br/>(Bypass Server)]:::frontend
    end

    subgraph Google_Cloud_Platform [Google Cloud Backend Pipeline]
        direction TB
        GCS[Cloud Storage Bucket<br/>(Trigger Event)]:::storage
        
        subgraph Serverless_Engine [Cloud Functions Gen 2]
            Trigger[Event Trigger<br/>onObjectFinalized]:::compute
            StreamParser[Node.js Stream<br/>(No Memory Bloat)]:::compute
            BulkWriter[Firestore BulkWriter<br/>(Parallel IO)]:::compute
        end

        Firestore[(Firestore DB<br/>NoSQL)]:::database
    end

    %% Flows with descriptions
    User -->|1. Drag & Drop File| ReactApp
    ReactApp -->|2. Upload Binary| DirectUpload
    DirectUpload == High-Speed Upload ==> GCS
    
    GCS -.->|3. Auto Trigger| Trigger
    Trigger -->|4. Pipe Stream| StreamParser
    StreamParser -->|5. Chunk Data| BulkWriter
    BulkWriter == 6. Massive Parallel Write (10k/sec) ==> Firestore

    %% Status Loop
    Firestore -.->|7. Real-time Status Sync| ReactApp

    %% Link Styling
    linkStyle default stroke:#5f6368,stroke-width:2px,fill:none
